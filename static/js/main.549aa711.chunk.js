(this.webpackJsonpsnapchat=this.webpackJsonpsnapchat||[]).push([[0],{16:function(e,t,a){e.exports=a.p+"static/media/ghost512.54bea9c3.png"},34:function(e,t,a){e.exports=a(66)},39:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(30),o=a.n(r),i=(a(39),a(3)),c=a(1),s=a(16),u=a.n(s),m=(a(40),a(41),a(5)),d=a(6),h=a(8),p=a(7),E=(a(42),a(4)),b=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={email:"",password:"",isAuth:!1},n.handleEmail=n.handleEmail.bind(Object(E.a)(n)),n.handlePassword=n.handlePassword.bind(Object(E.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(E.a)(n)),n}return Object(d.a)(a,[{key:"handleEmail",value:function(e){this.setState({email:e.target.value})}},{key:"handlePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),fetch("http://snapi.epitech.eu/connection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.state)}).then((function(e){return e.json()})).then((function(e){console.log(e.data.token),localStorage.setItem("tokenAuth",e.data.token),console.log(localStorage.getItem("tokenAuth")),t.setState({isAuth:!0})}))}},{key:"render",value:function(){if(1!=this.state.isAuth)return l.a.createElement("div",null,l.a.createElement("h1",null,"Login"),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("label",{for:"email"},"E-mail "),l.a.createElement("input",{type:"email",id:"email",value:this.state.value,onChange:this.handleEmail}),l.a.createElement("br",null),l.a.createElement("label",{for:"password"},"Password "),l.a.createElement("input",{type:"password",id:"password",value:this.state.value,onChange:this.handlePassword}),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Connect"})));window.location.href="/all"}}]),a}(n.Component),v=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={email:"",password:""},n.handleEmail=n.handleEmail.bind(Object(E.a)(n)),n.handlePassword=n.handlePassword.bind(Object(E.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(E.a)(n)),n}return Object(d.a)(a,[{key:"handleEmail",value:function(e){this.setState({email:e.target.value})}},{key:"handlePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),console.log(this.state),fetch("http://snapi.epitech.eu/inscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.state)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"Register"),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("label",{for:"email"},"E-mail "),l.a.createElement("input",{type:"email",id:"email",value:this.state.value,onChange:this.handleEmail}),l.a.createElement("br",null),l.a.createElement("label",{for:"password"},"Password "),l.a.createElement("input",{type:"password",id:"password",value:this.state.value,onChange:this.handlePassword}),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Connect"})))}}]),a}(n.Component),f=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){document.getElementById("navbar").style.display="none"}},{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement("img",{src:u.a,className:"App-logo",alt:"logo"}),l.a.createElement("p",null,"Welcome on My Snapchat !"),l.a.createElement("div",null,l.a.createElement(i.a,null,l.a.createElement(c.d,null,l.a.createElement(c.b,{path:"/login"},l.a.createElement(b,null)),l.a.createElement(c.b,{path:"/register"},l.a.createElement(v,null))),l.a.createElement("div",{className:"welcome"},l.a.createElement(i.b,{to:"/login"},"Login"),"\xa0",l.a.createElement(i.b,{to:"/register"},"Register"))))))}}]),a}(n.Component),g=a(32),y=a.n(g),k=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={duration:1,to:n.props.receiver},n.handleSubmit=n.handleSubmit.bind(Object(E.a)(n)),n.handleDuration=n.handleDuration.bind(Object(E.a)(n)),n.handleImage=n.handleImage.bind(Object(E.a)(n)),n.fileInput=l.a.createRef(),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){console.log(this.state)}},{key:"handleDuration",value:function(e){this.setState({duration:e.target.value})}},{key:"handleImage",value:function(e){this.setState({image:this.fileInput})}},{key:"handleSubmit",value:function(e){e.preventDefault(),document.getElementById("message").style.display="block";var t=new FormData;t.append("duration",this.state.duration),t.append("to",this.state.to),t.append("image",this.fileInput.current.files[0]),console.log(FormData),y.a.post("http://snapi.epitech.eu/snap",t,{headers:{"Content-Type":"multipart/form-data",token:localStorage.getItem("tokenAuth")}}).then((function(e){document.getElementById("message").style.display="none",document.getElementById("send-success").style.display="block",console.log({res:e})})).catch((function(e){console.error({err:e})}))}},{key:"render",value:function(){if(this.props.receiver)return l.a.createElement("div",null,l.a.createElement("p",{id:"message",style:{display:"none"}},"Chargement..."),l.a.createElement("h3",null,"Send a snap to ",l.a.createElement("u",null,this.props.receiver)),l.a.createElement("div",{className:"form-part"},l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("div",{className:"second-part"},l.a.createElement("h4",null,"Choose seconds"),l.a.createElement("select",{value:this.state.duration,onChange:this.handleDuration},l.a.createElement("option",{value:"1"},"1"),l.a.createElement("option",{value:"2"},"2"),l.a.createElement("option",{value:"3"},"3"),l.a.createElement("option",{value:"4"},"4"),l.a.createElement("option",{value:"5"},"5"),l.a.createElement("option",{value:"6"},"6"),l.a.createElement("option",{value:"7"},"7"),l.a.createElement("option",{value:"8"},"8"),l.a.createElement("option",{value:"9"},"9"),l.a.createElement("option",{value:"10"},"10"))),l.a.createElement("div",{className:"file-part"},l.a.createElement("h4",null,"Choose an image"),l.a.createElement("input",{type:"file",ref:this.fileInput,onChange:this.handleImage})),l.a.createElement("input",{type:"submit",value:"Submit"}))),l.a.createElement("div",{id:"send-success",style:{display:"none"}},l.a.createElement("iframe",{src:"https://giphy.com/embed/tIeCLkB8geYtW",width:"120",height:"95",frameBorder:"0",class:"giphy-embed"}),l.a.createElement("p",null,"Send with success !")))}}]),a}(n.Component),S=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={data:null,isReady:!1,userSelected:""},n.clickUser=n.clickUser.bind(Object(E.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log(localStorage.getItem("tokenAuth"));var t=localStorage.getItem("tokenAuth");fetch("http://snapi.epitech.eu/all",{method:"GET",headers:{token:t}}).then((function(e){return e.json()})).then((function(t){e.setState({isReady:!0,data:t}),console.log(e.state.data)}))}},{key:"clickUser",value:function(e){this.setState({userSelected:e.target.text}),document.getElementById("list-users").style.display="none"}},{key:"render",value:function(){var e=this,t=this.state.data;return this.state.isReady?l.a.createElement(i.a,null,l.a.createElement("div",{id:"list-users"},l.a.createElement("ul",null,t.data.map((function(t,a){return l.a.createElement("li",{key:a,className:"align-mi"},l.a.createElement("i",{className:"material-icons"},"person"),l.a.createElement(i.b,{to:"/snap",onClick:e.clickUser},t.email),l.a.createElement("i",{className:"material-icons send-logo"},"keyboard_arrow_right"))})))),l.a.createElement(c.d,null,l.a.createElement(c.b,{path:"/snap"},l.a.createElement(k,{receiver:this.state.userSelected})))):l.a.createElement("div",{className:"message"},"It comes...")}}]),a}(n.Component),j=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={snap:null,isReady:!1,duration:n.props.duration,token:""},n.countdownTime=n.countdownTime.bind(Object(E.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log(localStorage.getItem("tokenAuth"));var t=this.props.match.params.id,a=localStorage.getItem("tokenAuth");this.setState({idSnap:t,token:a}),fetch("http://snapi.epitech.eu/snap/".concat(t),{method:"GET",headers:{token:a}}).then((function(e){return e.blob()})).then((function(t){console.log(t);var a=e.state.duration,n=window.URL.createObjectURL(new Blob([t]));e.setState({isReady:!0,snap:n}),e.countdownTime(a)}))}},{key:"countdownTime",value:function(e){var t=this,a={id:this.props.match.params.id};console.log(a);var n=e-1;if(-1==n)return fetch("http://snapi.epitech.eu/seen",{method:"POST",headers:{"Content-Type":"application/json",token:this.state.token},body:JSON.stringify(a)}).then((function(e){console.log("Success:",e),window.location.href="/snaps"})).catch((function(e){console.error("Error:",e)})),this.setState({isReady:!1,duration:0});setTimeout((function(){t.setState({duration:n}),t.countdownTime(n)}),1e3)}},{key:"render",value:function(){return 0==this.state.duration?l.a.createElement("h3",null,"Snap deleted."):this.state.isReady?l.a.createElement("div",{className:"snap-part"},l.a.createElement("p",{className:"snap-duration"},this.state.duration),l.a.createElement("img",{className:"snap-image",src:this.state.snap})):l.a.createElement("h3",null,"It comes...")}}]),a}(n.Component),O=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={data:null,isReady:!1,duration:null},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log(localStorage.getItem("tokenAuth"));var t=localStorage.getItem("tokenAuth");fetch("http://snapi.epitech.eu/snaps",{method:"GET",headers:{token:t}}).then((function(e){return e.json()})).then((function(t){e.setState({isReady:!0,data:t}),console.log(e.state.data)}))}},{key:"changeDuration",value:function(e){this.setState({duration:e})}},{key:"render",value:function(){var e=this,t=this.state.data;return this.state.isReady?(console.log(t.data),0==t.data.length?l.a.createElement("h3",null,"No snap received"):l.a.createElement(i.a,null,l.a.createElement("div",{id:"list-users"},l.a.createElement("h3",null,"You received ",t.data.length," snaps !"),l.a.createElement("ul",null,t.data.map((function(t,a){return l.a.createElement("li",{key:a,className:"align-mi",onClick:function(){return e.changeDuration(t.duration)}},l.a.createElement("i",{className:"material-icons"},"person"),l.a.createElement(i.b,{to:"/snap/".concat(t.snap_id)},t.from),l.a.createElement("i",{className:"material-icons send-logo"},"keyboard_arrow_right"))}))),l.a.createElement(c.d,null,l.a.createElement(c.b,{path:"/snap/:id",render:function(t){return l.a.createElement(j,Object.assign({},t,{duration:e.state.duration}))}}))))):l.a.createElement("div",null,"It comes...")}}]),a}(n.Component),w=a(19),I=a.n(w),C=a(33),N=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={ready:!1},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(C.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.localStorage.removeItem("tokenAuth");case 2:this.setState({ready:!0});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.ready?l.a.createElement("div",null,l.a.createElement(c.b,{path:"/"},l.a.createElement(c.a,{to:"/welcome"}))):l.a.createElement("div",null,"Disconnecting...")}}]),a}(n.Component);var D=function(){return l.a.createElement("div",null,l.a.createElement(i.a,null,l.a.createElement("div",null,l.a.createElement("div",{id:"navbar"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("a",{href:"/all"},l.a.createElement("span",{class:"material-icons icon-white"},"people"))),l.a.createElement("li",null,l.a.createElement(i.b,{to:"/snaps"},l.a.createElement("i",{class:"material-icons icon-white"},"chat_bubble"))),l.a.createElement("li",null,l.a.createElement(i.b,{to:"/logout"},l.a.createElement("span",{class:"material-icons icon-white exit"},"exit_to_app"))))),l.a.createElement(c.d,null,l.a.createElement(c.b,{exact:!0,path:"/"},localStorage.getItem("tokenAuth")?l.a.createElement(c.a,{to:"/all"}):l.a.createElement(c.a,{to:"/welcome"})),l.a.createElement(c.b,{path:"/welcome"},l.a.createElement(f,null)),l.a.createElement(c.b,{path:"/all"},l.a.createElement(S,null)),l.a.createElement(c.b,{path:"/snaps"},l.a.createElement(O,null)),l.a.createElement(c.b,{path:"/logout"},l.a.createElement(N,null))))))};o.a.render(l.a.createElement(D,null),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.549aa711.chunk.js.map